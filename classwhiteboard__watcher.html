<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>gusimplewhiteboard: whiteboard_watcher Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">gusimplewhiteboard
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classwhiteboard__watcher.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classwhiteboard__watcher-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">whiteboard_watcher Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This class provides a subscription implementation for the 'simple' whiteboard, aka the 'typed' whiteboard.  
 <a href="classwhiteboard__watcher.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="guwhiteboardwatcher_8h_source.html">guwhiteboardwatcher.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for whiteboard_watcher:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classwhiteboard__watcher__coll__graph.svg" width="175" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab3cf96fe7e95de07d67dc204bd1671b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwhiteboard__watcher.html#ab3cf96fe7e95de07d67dc204bd1671b6">whiteboard_watcher</a> (<a class="el" href="gusimplewhiteboard_8h.html#a2afc82bc4179adb756fb5d903221ce51">gu_simple_whiteboard_descriptor</a> *wbd=NULLPTR)</td></tr>
<tr class="memdesc:ab3cf96fe7e95de07d67dc204bd1671b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor, sets up the dispatch queues for handling callbacks.  <a href="classwhiteboard__watcher.html#ab3cf96fe7e95de07d67dc204bd1671b6">More...</a><br /></td></tr>
<tr class="separator:ab3cf96fe7e95de07d67dc204bd1671b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecc8073dd01d00ad6d04413761d33b15"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwhiteboard__watcher.html#aecc8073dd01d00ad6d04413761d33b15">~whiteboard_watcher</a> ()</td></tr>
<tr class="memdesc:aecc8073dd01d00ad6d04413761d33b15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor, release whiteboard objects and dispatch queues.  <a href="classwhiteboard__watcher.html#aecc8073dd01d00ad6d04413761d33b15">More...</a><br /></td></tr>
<tr class="separator:aecc8073dd01d00ad6d04413761d33b15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43f2eab1c7d8d5797846888ef11b2ab4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwhiteboard__watcher.html#a43f2eab1c7d8d5797846888ef11b2ab4">subscribe</a> (<a class="el" href="class_w_b_functor_base.html">WBFunctorBase</a> *func)</td></tr>
<tr class="memdesc:a43f2eab1c7d8d5797846888ef11b2ab4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows you to subscribe to a specific whiteboard type and get callbacks when that type is updated.  <a href="classwhiteboard__watcher.html#a43f2eab1c7d8d5797846888ef11b2ab4">More...</a><br /></td></tr>
<tr class="separator:a43f2eab1c7d8d5797846888ef11b2ab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53090ccc41b2e6d727a8e84cda50402e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwhiteboard__watcher.html#a53090ccc41b2e6d727a8e84cda50402e">unsubscribe</a> (guWhiteboard ::<a class="el" href="guwhiteboardtypelist__c__generated_8h.html#af748fae920d7361e5a6596af2fad869c">wb_types</a> t)</td></tr>
<tr class="memdesc:a53090ccc41b2e6d727a8e84cda50402e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop getting callbacks for a particular whiteboard type.  <a href="classwhiteboard__watcher.html#a53090ccc41b2e6d727a8e84cda50402e">More...</a><br /></td></tr>
<tr class="separator:a53090ccc41b2e6d727a8e84cda50402e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a150bf77f8db6d880df96b48480208a1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwhiteboard__watcher.html#a150bf77f8db6d880df96b48480208a1b">receive_callback</a> ()</td></tr>
<tr class="memdesc:a150bf77f8db6d880df96b48480208a1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal function, this is what gets triggered by the underlying whiteboard, it then checks its list of subscribed types and issues callback functions to subscribed modules.  <a href="classwhiteboard__watcher.html#a150bf77f8db6d880df96b48480208a1b">More...</a><br /></td></tr>
<tr class="separator:a150bf77f8db6d880df96b48480208a1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This class provides a subscription implementation for the 'simple' whiteboard, aka the 'typed' whiteboard. </p>
<p >This class allows you to 'subscribe' to changes on the Whiteboard. Specifically call you can call the subscribe method, with the desired 'type' and a callback pointer. This class will monitor any subscribed 'types' and call the callback functions when the data related to those 'types' is updated. To be clear, callbacks will be issued if the data is updated on the Whiteboard, even if it is the same data. The act of the data being posted to the Whiteboard is what triggers callbacks. This is designed for event-triggered systems and different data fetching methods should be used for time-triggered systems.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Examples</h2>
<h3><a class="anchor" id="autotoc_md6"></a>
A SUBSCRIBE macro is defined for convenience</h3>
<pre class="fragment">wb = new whiteboard_watcher(); //create the watcher object
//wb = whiteboard_watcher
//Say = the WB type to subscribe to
//GUNaoSpeech = the class the callback belongs to
//GUNaoSpeech::whiteboard_callback = the callback function
SUBSCRIBE(wb, Say, GUNaoSpeech, GUNaoSpeech::whiteboard_callback);
</pre> <h3><a class="anchor" id="autotoc_md7"></a>
The long form of the subscribe looks like this:</h3>
<pre class="fragment">wb = new whiteboard_watcher(); //create the watcher object
((wb)-&gt;subscribe(Say_WBFunctor&lt;GUNaoSpeech&gt;::bind(this, &amp;GUNaoSpeech::whiteboard_callback, kSay_v)));
</pre> 
<p class="definition">Definition at line <a class="el" href="guwhiteboardwatcher_8h_source.html#l00104">104</a> of file <a class="el" href="guwhiteboardwatcher_8h_source.html">guwhiteboardwatcher.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab3cf96fe7e95de07d67dc204bd1671b6" name="ab3cf96fe7e95de07d67dc204bd1671b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3cf96fe7e95de07d67dc204bd1671b6">&#9670;&nbsp;</a></span>whiteboard_watcher()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">whiteboard_watcher::whiteboard_watcher </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="gusimplewhiteboard_8h.html#a2afc82bc4179adb756fb5d903221ce51">gu_simple_whiteboard_descriptor</a> *&#160;</td>
          <td class="paramname"><em>wbd</em> = <code>NULLPTR</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor, sets up the dispatch queues for handling callbacks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wbd</td><td>You can pass a specific pointer to a whiteboard object if you wish. By default a pointer to the default whiteboard is used. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="guwhiteboardwatcher_8h_source.html#l00117">117</a> of file <a class="el" href="guwhiteboardwatcher_8h_source.html">guwhiteboardwatcher.h</a>.</p>

<p class="reference">References <a class="el" href="gusimplewhiteboard_8h_source.html#l00319">gsw_whiteboard_s::callback</a>, <a class="el" href="gusimplewhiteboard_8h_source.html#l00320">gsw_whiteboard_s::context</a>, <a class="el" href="guwhiteboardwatcher_8h_source.html#l00040">DISPATCH_QUEUE_NAME_WB</a>, <a class="el" href="guwhiteboardwatcher_8h_source.html#l00043">DISPATCH_QUEUE_SERIAL</a>, and <a class="el" href="gusimplewhiteboard_8c_source.html#l00281">get_local_singleton_whiteboard()</a>.</p>

</div>
</div>
<a id="aecc8073dd01d00ad6d04413761d33b15" name="aecc8073dd01d00ad6d04413761d33b15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecc8073dd01d00ad6d04413761d33b15">&#9670;&nbsp;</a></span>~whiteboard_watcher()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">whiteboard_watcher::~whiteboard_watcher </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor, release whiteboard objects and dispatch queues. </p>

<p class="definition">Definition at line <a class="el" href="guwhiteboardwatcher_8h_source.html#l00144">144</a> of file <a class="el" href="guwhiteboardwatcher_8h_source.html">guwhiteboardwatcher.h</a>.</p>

<p class="reference">References <a class="el" href="gusimplewhiteboard_8h_source.html#l00319">gsw_whiteboard_s::callback</a>, <a class="el" href="gusimplewhiteboard_8h_source.html#l00322">gsw_whiteboard_s::exit_monitor</a>, and <a class="el" href="gusimplewhiteboard_8c_source.html#l00254">gsw_free_whiteboard()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a150bf77f8db6d880df96b48480208a1b" name="a150bf77f8db6d880df96b48480208a1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a150bf77f8db6d880df96b48480208a1b">&#9670;&nbsp;</a></span>receive_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void whiteboard_watcher::receive_callback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal function, this is what gets triggered by the underlying whiteboard, it then checks its list of subscribed types and issues callback functions to subscribed modules. </p>

<p class="definition">Definition at line <a class="el" href="guwhiteboardwatcher_8h_source.html#l00219">219</a> of file <a class="el" href="guwhiteboardwatcher_8h_source.html">guwhiteboardwatcher.h</a>.</p>

<p class="reference">References <a class="el" href="gusimplewhiteboard_8h_source.html#l00274">gsw_simple_whiteboard_s::event_counters</a>, <a class="el" href="class_w_b_functor_base.html#a94033c100663868523fabcc96fb4ee95">WBFunctorBase::get_event_count()</a>, <a class="el" href="gusimplewhiteboard_8c_source.html#l00360">gsw_procure()</a>, <a class="el" href="gusimplewhiteboard_8h_source.html#l00177">GSW_SEM_CALLBACK</a>, <a class="el" href="gusimplewhiteboard_8h_source.html#l00149">GSW_TOTAL_MESSAGE_TYPES</a>, <a class="el" href="gusimplewhiteboard_8h_source.html#l00273">gsw_simple_whiteboard_s::indexes</a>, <a class="el" href="guwhiteboardtypelist__c__generated_8h_source.html#l00230">kwb_reserved_SubscribeToAllTypes_v</a>, <a class="el" href="gusimplewhiteboard_8h_source.html#l00312">gsw_whiteboard_s::sem</a>, <a class="el" href="class_w_b_functor_base.html#a7fa47ff3e161295ddd4e12dc647e8003">WBFunctorBase::type()</a>, and <a class="el" href="gusimplewhiteboard_8h_source.html#l00311">gsw_whiteboard_s::wb</a>.</p>

</div>
</div>
<a id="a43f2eab1c7d8d5797846888ef11b2ab4" name="a43f2eab1c7d8d5797846888ef11b2ab4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43f2eab1c7d8d5797846888ef11b2ab4">&#9670;&nbsp;</a></span>subscribe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void whiteboard_watcher::subscribe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_w_b_functor_base.html">WBFunctorBase</a> *&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allows you to subscribe to a specific whiteboard type and get callbacks when that type is updated. </p>
<p >You will still get a callback if the type is updated and the data didn't change. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>the callback container object. I suggest using the macro SUBSCRIBE (see example at the top of this file) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="guwhiteboardwatcher_8h_source.html#l00166">166</a> of file <a class="el" href="guwhiteboardwatcher_8h_source.html">guwhiteboardwatcher.h</a>.</p>

<p class="reference">References <a class="el" href="gusimplewhiteboard_8h_source.html#l00274">gsw_simple_whiteboard_s::event_counters</a>, <a class="el" href="gusimplewhiteboard_8c_source.html#l00528">gsw_add_process()</a>, <a class="el" href="gusimplewhiteboard_8c_source.html#l00613">gsw_add_wbd_signal_handler()</a>, <a class="el" href="gusimplewhiteboard_8c_source.html#l00360">gsw_procure()</a>, <a class="el" href="gusimplewhiteboard_8h_source.html#l00177">GSW_SEM_CALLBACK</a>, <a class="el" href="gusimplewhiteboard_8h_source.html#l00149">GSW_TOTAL_MESSAGE_TYPES</a>, <a class="el" href="gusimplewhiteboard_8c_source.html#l00380">gsw_vacate()</a>, <a class="el" href="class_w_b_functor_base.html#af46a5f0eaf76dce5acfe2623cbd00fd3">WBFunctorBase::is_simple_wb_version()</a>, <a class="el" href="guwhiteboardtypelist__c__generated_8h_source.html#l00230">kwb_reserved_SubscribeToAllTypes_v</a>, <a class="el" href="gusimplewhiteboard_8h_source.html#l00312">gsw_whiteboard_s::sem</a>, <a class="el" href="class_w_b_functor_base.html#ad7e5b213cfb6b80b4b33b915410627b1">WBFunctorBase::set_event_count()</a>, <a class="el" href="class_w_b_functor_base.html#a7fa47ff3e161295ddd4e12dc647e8003">WBFunctorBase::type()</a>, and <a class="el" href="gusimplewhiteboard_8h_source.html#l00311">gsw_whiteboard_s::wb</a>.</p>

<p class="reference">Referenced by <a class="el" href="_simple_whiteboard_test_8mm_source.html#l00084">WBSubscriber::WBSubscriber()</a>.</p>

</div>
</div>
<a id="a53090ccc41b2e6d727a8e84cda50402e" name="a53090ccc41b2e6d727a8e84cda50402e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53090ccc41b2e6d727a8e84cda50402e">&#9670;&nbsp;</a></span>unsubscribe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void whiteboard_watcher::unsubscribe </td>
          <td>(</td>
          <td class="paramtype">guWhiteboard ::<a class="el" href="guwhiteboardtypelist__c__generated_8h.html#af748fae920d7361e5a6596af2fad869c">wb_types</a>&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stop getting callbacks for a particular whiteboard type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the type to unsubscribe from </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="guwhiteboardwatcher_8h_source.html#l00197">197</a> of file <a class="el" href="guwhiteboardwatcher_8h_source.html">guwhiteboardwatcher.h</a>.</p>

<p class="reference">References <a class="el" href="gusimplewhiteboard_8c_source.html#l00360">gsw_procure()</a>, <a class="el" href="gusimplewhiteboard_8c_source.html#l00547">gsw_remove_process()</a>, <a class="el" href="gusimplewhiteboard_8h_source.html#l00177">GSW_SEM_CALLBACK</a>, <a class="el" href="gusimplewhiteboard_8c_source.html#l00380">gsw_vacate()</a>, <a class="el" href="gusimplewhiteboard_8h_source.html#l00312">gsw_whiteboard_s::sem</a>, <a class="el" href="class_w_b_functor_base.html#a7fa47ff3e161295ddd4e12dc647e8003">WBFunctorBase::type()</a>, and <a class="el" href="guwhiteboardwatcher_8h_source.html#l00048">WBTYPES_NS</a>.</p>

<p class="reference">Referenced by <a class="el" href="_simple_whiteboard_test_8mm_source.html#l00094">WBSubscriber::~WBSubscriber()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="guwhiteboardwatcher_8h_source.html">guwhiteboardwatcher.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classwhiteboard__watcher.html">whiteboard_watcher</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
